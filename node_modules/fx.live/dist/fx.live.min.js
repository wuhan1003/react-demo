!function(t,e){"function"==typeof define&&define.amd?define("fx.live",e):"object"==typeof exports?module.exports=e():(t.Fx=t.Fx||{},t.Fx.live=e(t.Fx))}(this,function(Fx){function __uri(t){return t}var JSON=JSON||{stringify:function(t,e){function a(t){return 10>t?"0"+t:t}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z"};var i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function n(t,e){var a,r,l,o,s,c=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof t){case"string":return c.test(t)?'"'+t.replace(c,function(t){var e=i[t];return e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"';case"number":return isFinite(t)?String(t):"null";case"boolean":case"null":return String(t);case"object":if(!t)return"null";if("function"==typeof t.toJSON)return n(t.toJSON());if(a=[],"number"==typeof t.length&&!t.propertyIsEnumerable("length")){for(o=t.length,r=0;o>r;r+=1)a.push(n(t[r],e)||"null");return"["+a.join(",")+"]"}if(e)for(o=e.length,r=0;o>r;r+=1)l=e[r],"string"==typeof l&&(s=n(t[l],e),s&&a.push(n(l)+":"+s));else for(l in t)"string"==typeof l&&(s=n(t[l],e),s&&a.push(n(l)+":"+s));return"{"+a.join(",")+"}"}}(t,e)},parse:function(text,filter){return function(text,filter){function walk(t,e){var a,i;if(e&&"object"==typeof e)for(a in e)Object.prototype.hasOwnProperty.apply(e,[a])&&(i=walk(a,e[a]),void 0!==i?e[a]=i:delete e[a]);return filter(t,e)}if("string"!=typeof text||!text)return null;var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof filter?walk("",j):j;throw new SyntaxError("parseJSON")}()}};return Fx.live={id:"",SWF:null,swfData:{id:"",src:"",width:0,height:0},liveData:{roomId:"",platform:"web",liveName:"",liveClient:"",liveStatus:0},_flashReady:function(t){if(this.readyCallbacks&&this.readyCallbacks.length)for(var e=this.readyCallbacks.length-1;e>=0;e--)this.readyCallbacks[e]&&this.readyCallbacks[e].call(this,t)},_returnDomain:function(){return document.domain},_returnVDomain:function(t){return t},_rootParamStatus:function(){return"live"+this.liveData.roomId},_downloadFxBB:function(){var t="http://banzou.kugou.com/service.php?act=OffvocalService&mtd=getNewVer&args=[]&jsonCallBack=downloadFxBBCallback",e=document.createElement("script");e.src=t,document.body.appendChild(e),window.downloadFxBBCallback=function(t){if(1==t.status){var a=document.createElement("a");a.setAttribute("href",t.data.url),document.body.appendChild(a),a.click(),window.downloadFxBBCallback=null,document.body.removeChild(e),document.body.removeChild(a)}else alert(t.errorcode)}},startLive:function(t){try{this.SWF.startLive(JSON.stringify(t))}catch(e){console.log(e)}},stopLive:function(t){try{this.SWF.stopLive(JSON.stringify(t))}catch(e){console.log(e)}},playLive:function(){try{this.SWF.playLive()}catch(t){console.log(t)}},pauseLive:function(){try{this.SWF.pauseLive()}catch(t){console.log(t)}},init:function(t,e){this.id=t.id||"",this.swfData.id=t.id||"",this.swfData.src=t.src||"",this.swfData.width=t.width||"",this.swfData.height=t.height||"",this.liveData.roomId=t.roomId||"",this.liveData.platform=t.platform||"web",this.liveData.liveName=t.liveName||"",this.liveData.liveClient=t.liveClient||"",this.liveData.liveStatus=t.liveStatus||0,e||this.loadLiveFlashPlayer()},flashReadyCallback:function(t){this.readyCallbacks=this.readyCallbacks||[],this.readyCallbacks.push(t)},loadLiveFlashPlayer:function(){var t=document.getElementById(this.id);t.outerHTML='<object id="'+this.swfData.id+'" width="'+this.swfData.width+'" height="'+this.swfData.height+'" data="'+this.swfData.src+'"><param name="scale" value="noScale"><param name="allowScriptAccess" value="always"/><param name="allowFullscreen" value="true"><param name="wmode" value="transparent"><param name="flashvars" value="liveName='+this.liveData.liveName+"&liveStatus="+this.liveData.liveStatus+"&platform="+this.liveData.platform+"&liveClient="+encodeURIComponent(JSON.stringify(this.liveData.liveClient))+'"><param name="movie" value="'+this.swfData.src+'"/>',this.SWF=document.getElementById(this.id)},oepnPlugins:function(t){var e="/src/fx.live.plugins.js";switch(t){case"SONG_RADDR":Fx.http.loadScript(e)}this.SWF.openPlugin(t)}},Fx.live});